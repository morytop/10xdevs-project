---
import Layout from "@/layouts/Layout.astro";
import RegisterForm from "@/components/auth/RegisterForm";
import { ToasterProvider } from "@/components/ToasterProvider";

// Enable SSR for this page
export const prerender = false;

/**
 * Additional SSR check for faster UX (optional, middleware already handles this)
 * If user is already logged in via Astro.locals.user (set by middleware),
 * redirect immediately to dashboard without rendering the form
 */
if (Astro.locals.user) {
  return Astro.redirect("/dashboard");
}
---

<Layout title="Rejestracja - AI Meal Planner" description="Załóż konto i zacznij korzystać z AI Meal Planner już dziś">
  <main class="min-h-screen flex items-center justify-center bg-gray-50 px-4 py-8">
    <div class="w-full max-w-md">
      <RegisterForm client:load />
    </div>
  </main>
  <ToasterProvider client:only="react" />
</Layout>
