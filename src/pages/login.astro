---
import Layout from "@/layouts/Layout.astro";
import { LoginForm } from "@/components/auth/LoginForm";
import { ToasterProvider } from "@/components/ToasterProvider";

// Disable prerendering to enable SSR
export const prerender = false;

/**
 * Additional SSR check for faster UX (optional, middleware already handles this)
 * If user is already logged in via Astro.locals.user (set by middleware),
 * redirect immediately to dashboard without rendering the form
 */
if (Astro.locals.user) {
  return Astro.redirect("/dashboard");
}
---

<Layout
  title="Zaloguj się - AI Meal Planner"
  description="Zaloguj się do AI Meal Planner aby uzyskać dostęp do swoich spersonalizowanych planów posiłków"
>
  <main class="min-h-screen flex items-center justify-center bg-gray-50 px-4 py-8">
    <div class="w-full max-w-md">
      <LoginForm client:load />
    </div>
  </main>
  <ToasterProvider client:only="react" />
</Layout>
